{"version":3,"sources":["webpack:///./src/views/UserSetting.vue?eb66","webpack:///./src/views/UserSetting.vue?6344","webpack:///src/views/UserSetting.vue","webpack:///./src/views/UserSetting.vue?4d1d","webpack:///./src/views/UserSetting.vue?dfcf"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_m","staticStyle","on","$event","stopPropagation","preventDefault","handleSubmit","directives","name","rawName","value","expression","domProps","target","composing","account","email","oldPassword","newPassword","checkPassword","staticRenderFns","_v","data","computed","components","Navbar","methods","fetchData","currentUser","created","component"],"mappings":"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","file":"js/chunk-288c86ad.c507035a.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=style&index=0&id=0a4f3156&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"navbar-area\",attrs:{\"id\":\"navbar-area\"}},[_c('Navbar')],1),_c('div',{staticClass:\"right-content\"},[_vm._m(0),_c('main',[_c('form',{staticClass:\"ml-2\",staticStyle:{\"width\":\"60%\"},on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"form-group my-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.account),expression:\"account\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"account\",\"name\":\"account\",\"placeholder\":\"帳號\",\"required\":\"\"},domProps:{\"value\":(_vm.account)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.account=$event.target.value}}})]),_c('div',{staticClass:\"form-group my-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"form-control\",attrs:{\"type\":\"email\",\"id\":\"email\",\"name\":\"email\",\"placeholder\":\"Email\",\"required\":\"\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}})]),_c('div',{staticClass:\"form-group my-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"name\",\"name\":\"name\",\"placeholder\":\"名稱\",\"required\":\"\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]),_c('div',{staticClass:\"password-group-wrapper\"},[_c('div',{staticClass:\"form-group my-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.oldPassword),expression:\"oldPassword\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"id\":\"oldPassword\",\"name\":\"oldPassword\",\"placeholder\":\"舊密碼\"},domProps:{\"value\":(_vm.oldPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.oldPassword=$event.target.value}}})]),_c('div',{staticClass:\"form-group my-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPassword),expression:\"newPassword\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"id\":\"newPassword\",\"name\":\"newPassword\",\"placeholder\":\"新密碼\"},domProps:{\"value\":(_vm.newPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newPassword=$event.target.value}}})]),_c('div',{staticClass:\"form-group my-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkPassword),expression:\"checkPassword\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"id\":\"checkPassword\",\"name\":\"checkPassword\",\"placeholder\":\"密碼確認\"},domProps:{\"value\":(_vm.checkPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.checkPassword=$event.target.value}}})])]),_vm._m(1)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upper-area\"},[_c('div',{staticClass:\"upper-area-content\"},[_c('strong',[_vm._v(\"帳戶設定\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btn-control d-flex justify-content-end\"},[_c('button',{staticClass:\"btn btn-primary ml-auto save\",attrs:{\"type\":\"submit\"}},[_vm._v(\" 儲存 \")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div id=\"navbar-area\" class=\"navbar-area\">\n      <!-- 插入 Navbar -->\n      <Navbar />\n    </div>\n\n    <div class=\"right-content\">\n      <div class=\"upper-area\">\n        <div class=\"upper-area-content\">\n          <strong>帳戶設定</strong>\n        </div>\n      </div>\n      <main>\n        <form\n          class=\"ml-2\"\n          @submit.stop.prevent=\"handleSubmit\"\n          style=\"width: 60%\"\n        >\n          <div class=\"form-group my-4\">\n            <input\n              type=\"text\"\n              id=\"account\"\n              name=\"account\"\n              class=\"form-control\"\n              placeholder=\"帳號\"\n              v-model=\"account\"\n              required\n            />\n          </div>\n\n          <div class=\"form-group my-4\">\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              class=\"form-control\"\n              placeholder=\"Email\"\n              v-model=\"email\"\n              required\n            />\n          </div>\n\n          <div class=\"form-group my-4\">\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              class=\"form-control\"\n              placeholder=\"名稱\"\n              v-model=\"name\"\n              required\n            />\n          </div>\n\n          <!-- <div class=\"toggle-wrapper d-100\">\n            <input type=\"radio\" id=\"password-toggle\" class=\"password-toggle\" />\n          <label for=\"password-toggle\" class=\"password-toggle-label\"\n            >修改密碼</label>\n            <div class=\"down-arrow\">&gt;</div>\n          </div> -->\n          \n          <div class=\"password-group-wrapper\">\n            <div class=\"form-group my-4\">\n              <input\n                type=\"password\"\n                id=\"oldPassword\"\n                name=\"oldPassword\"\n                class=\"form-control\"\n                placeholder=\"舊密碼\"\n                v-model=\"oldPassword\"\n              />\n            </div>\n            <div class=\"form-group my-4\">\n              <input\n                type=\"password\"\n                id=\"newPassword\"\n                name=\"newPassword\"\n                class=\"form-control\"\n                placeholder=\"新密碼\"\n                v-model=\"newPassword\"\n              />\n            </div>\n\n            <div class=\"form-group my-4\">\n              <input\n                type=\"password\"\n                id=\"checkPassword\"\n                name=\"checkPassword\"\n                class=\"form-control\"\n                placeholder=\"密碼確認\"\n                v-model=\"checkPassword\"\n              />\n            </div>\n          </div>\n\n          <div class=\"btn-control d-flex justify-content-end\">\n            <button class=\"btn btn-primary ml-auto save\" type=\"submit\">\n              儲存\n            </button>\n          </div>\n        </form>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navbar from \"../components/Navbar\";\nimport usersAPI from \"../apis/users\";\nimport { Toast } from \"../utils/helpers\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"UserSetting\",\n  data() {\n    return {\n      account: \"\",\n      email: \"\",\n      name: \"\",\n      oldPassword: \"\",\n      newPassword: \"\",\n      checkPassword: \"\",\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  components: {\n    Navbar,\n  },\n  methods: {\n    fetchData() {\n      this.account = this.currentUser.account;\n      this.email = this.currentUser.email;\n      this.name = this.currentUser.name;\n    },\n    async handleSubmit(e) {\n      try {\n        const form = e.target;\n        const formData = new FormData(form);\n        const id = this.currentUser.id;\n        const passwordItems = [\"oldPassword\", \"newPassword\", \"checkPassword\"];\n\n        //如果必填項目空白\n        if (!this.account || !this.email || !this.name) {\n          Toast.fire({\n            icon: \"error\",\n            title: \"必填項目不能為空白\",\n          });\n          return\n        }\n\n        //如果未修改密碼，則只回傳前三筆資料\n        if (!this.oldPassword || !this.newPassword || !this.checkPassword) {\n          passwordItems.forEach((item) => {\n            formData.delete(item);\n          });\n        }\n\n        const response = await usersAPI.updateUser(id, { formData });\n        \n        if (response.statusText !== 'OK') {\n          throw new Error(response.statusText)\n        }\n\n        Toast.fire({\n          icon: 'success',\n          title: '已成功修改資料'\n        })\n        \n        this.fetchData()\n        this.$router.push({name: 'main-tweets'})\n\n      } catch ({ response }) {\n        Toast.fire({\n          icon: \"error\",\n          title: response.data.message,\n        });\n      }\n    },\n\n    // async handleSubmit() {\n    //   try {\n    //     const { id, account, email, name } = this.currentUser;\n    //     // const oldPassword = this.oldPassword;\n    //     // const newPassword = this.newPassword;\n    //     // const checkPassword = this.checkPassword;\n\n    //     const response = await usersAPI.updateUser(id, {\n    //       account,\n    //       email,\n    //       name\n    //     });\n\n    //     const { data } = response;\n    //     console.log(data);\n    //   } catch (error) {\n    //     console.log(error);\n    //     Toast.fire({\n    //       icon: \"error\",\n    //       title: \"無法修改資料，請稍後再試\"\n    //     });\n    //   }\n    // }\n  },\n  created() {\n    this.fetchData();\n  },\n};\n</script>\n\n<style scoped>\n.right-content {\n  flex-grow: 1;\n}\n.upper-area-content {\n  border-bottom: 1px solid #e6ecf0;\n  padding-left: 15px;\n}\n\n.upper-area strong {\n  line-height: 55px;\n}\n\ninput {\n  background-color: #f5f8fa;\n  border: hidden;\n  border-bottom: 2px solid #657786;\n  height: 50px;\n}\n\n.save {\n  width: 122px;\n  border-radius: 20px;\n}\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserSetting.vue?vue&type=template&id=0a4f3156&scoped=true&\"\nimport script from \"./UserSetting.vue?vue&type=script&lang=js&\"\nexport * from \"./UserSetting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserSetting.vue?vue&type=style&index=0&id=0a4f3156&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a4f3156\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}