(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1933fae3"],{"11b3":function(t,e,i){"use strict";i("5a4f")},"2e7c":function(t,e,i){"use strict";i("ba77")},"4c90":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex"},[i("div",{attrs:{id:"navbar-area"}},[i("AdminNav")],1),i("div",{staticClass:"row",staticStyle:{height:"100%"},attrs:{id:"all-container"}},[i("h5",{staticStyle:{width:"100%"}},[t._v("推文清單")]),this.isLoading?i("Spinner"):t._e(),t._l(t.tweets,(function(e){return i("AdminTweet",{key:e.id,attrs:{"initial-tweet":e},on:{"delete-tweet":t.deleteTweet}})}))],2)])},a=[],n=(i("4de4"),i("2909")),r=(i("96cf"),i("1da1")),c=i("e04c"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tweetscontainer"},[s("div",{staticClass:"tweetscard d-flex"},[s("div",{staticClass:"userphoto mx-2 ml-3"},[s("img",{staticClass:"userpic",attrs:{src:t.tweet.User.avatar,alt:"userpic"}})]),s("div",{staticClass:"contentcontainer d-flex"},[s("div",{staticClass:"userinfo d-flex"},[s("div",{staticClass:"username"},[t._v(t._s(t.tweet.User.name))]),s("div",{staticClass:"useraccount"},[t._v(t._s(t.tweet.User.account))]),s("div",{staticClass:"dot"},[t._v("·")]),s("div",{staticClass:"tweettime"},[t._v(t._s(t._f("fromNow")(t.tweet.createdAt)))])]),t.tweet.overFifty?s("div",{staticClass:"tweetcontent"},[t._v(" "+t._s(t.tweet.trimmedTweet)+" ... ")]):t._e(),t.tweet.overFifty?s("button",{staticClass:"btn-primary",on:{click:t.showMore}},[t._v(" Show All ")]):s("div",{staticClass:"tweetcontent"},[t._v(" "+t._s(t.tweet.description)+" ")])]),s("div",{staticClass:"delete"},[s("img",{staticClass:"delete-img",attrs:{src:i("61da"),alt:"delete"},on:{click:function(e){return t.deleteTweet(t.tweet.id)}}})])])])},l=[],u=(i("a4d3"),i("e01a"),i("5530")),d=i("2708"),f={name:"AdminTweet",props:{initialTweet:{type:Object,required:!0}},mixins:[d["b"]],data:function(){return{tweet:{}}},methods:{fetchTweet:function(){this.tweet=this.initialTweet;var t=this.tweet.description;if(t.length>50){this.tweet.overFifty=!0;var e=t.substr(0,50);this.tweet.trimmedTweet=e}},deleteTweet:function(){this.$emit("delete-tweet",this.tweet.id)},showMore:function(){this.tweet=Object(u["a"])(Object(u["a"])({},this.tweet),{},{overFifty:!this.tweet.overFifty})}},created:function(){this.fetchTweet()}},w=f,m=(i("11b3"),i("2877")),h=Object(m["a"])(w,o,l,!1,null,"56d68442",null),v=h.exports,g=i("2375"),p=i("be6c"),b=i("2fa3"),C={components:{AdminNav:c["a"],AdminTweet:v,Spinner:g["a"]},data:function(){return{tweets:[],isLoading:!0}},methods:{fetchAdminTweets:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,p["a"].getAdminTweets();case 4:i=e.sent,s=i.data,t.tweets=Object(n["a"])(s),t.isLoading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),t.isLoading=!1,console.log("error:",e.t0),b["a"].fire({icon:"warning",title:"暫時無法取得推文，請稍候再試！"});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},deleteTweet:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,p["a"].deleteTweet(t);case 3:s=i.sent,a=s.data,console.log(a),e.tweets=e.tweets.filter((function(e){return e.id!==t})),b["a"].fire({icon:"success",title:"成功刪除該推文"}),i.next=14;break;case 10:i.prev=10,i.t0=i["catch"](0),console.log("error:",i.t0),b["a"].fire({icon:"error",title:"暫時無法刪除推文，請稍候再試！"});case 14:case"end":return i.stop()}}),i,null,[[0,10]])})))()}},created:function(){this.fetchAdminTweets()}},_=C,x=(i("2e7c"),Object(m["a"])(_,s,a,!1,null,"3721e5df",null));e["default"]=x.exports},"530f":function(t,e,i){"use strict";i("5c4e")},"5a4f":function(t,e,i){},"5c4e":function(t,e,i){},ba77:function(t,e,i){},be6c:function(t,e,i){"use strict";var s=i("2fa3"),a=function(){return localStorage.getItem("token")};e["a"]={getAdminTweets:function(){return s["b"].get("/api/admin/tweets",{headers:{Authorization:"Bearer ".concat(a())}})},getAdminUsers:function(){return s["b"].get("/api/admin/users",{headers:{Authorization:"Bearer ".concat(a())}})},deleteTweet:function(t){return s["b"].delete("/api/admin/tweets/".concat(t),{headers:{Authorization:"Bearer ".concat(a())}})}}},e04c:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sidebar"},[s("div",{staticClass:"sidebar-sticky d-flex flex-column",staticStyle:{height:"100%"}},[t._m(0),s("ul",[s("li",[s("router-link",{staticClass:"nav-item d-flex",attrs:{to:"/admin/main"}},[s("img",{staticClass:"tweeticon",attrs:{src:i("5896"),alt:"推文icon"}}),s("img",{staticClass:"icon-hovered",attrs:{src:i("3d35")}}),s("h5",{staticClass:"list"},[t._v("推文清單")])])],1),s("li",[s("router-link",{staticClass:"nav-item d-flex",attrs:{to:"/admin/users"}},[s("img",{staticClass:"usericon",attrs:{src:i("cf4a"),alt:"使用者icon"}}),s("img",{staticClass:"icon-hovered",attrs:{src:i("8ec2")}}),s("h5",{staticClass:"user"},[t._v("使用者列表")])])],1),s("div",{staticClass:"logout-wrapper"},[s("router-link",{staticClass:"logout d-flex",attrs:{to:"/admin/login"},on:{click:t.handleSignOut}},[s("img",{staticClass:"logout-icon",attrs:{src:i("f300"),alt:"登出icon"}}),s("h5",{staticClass:"logout-text"},[t._v("登出")])])],1)])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"img-wrapper"},[i("img",{staticClass:"alphitterLogo",attrs:{src:"https://imgur.com/JVhBuMg.png",alt:"alphitterLogo"}})])}],n=i("5530"),r=i("2f62"),c={name:"AdminNavbar",computed:Object(n["a"])({},Object(r["b"])(["currentUser","isAuthenticated"])),methods:{handleSignOut:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/admin/login")}}},o=c,l=(i("530f"),i("2877")),u=Object(l["a"])(o,s,a,!1,null,"72927a4e",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-1933fae3.ba36b070.js.map